<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <title>$C.java</title>
    <link href="http://circumflex.ru/css/docco.css"
          rel="stylesheet"
          type="text/css"
          media="screen, projection"/>
    <script type="text/javascript" src="http://circumflex.ru/js/highlight.pack.js">
    </script>
    <script type="text/javascript">
        hljs.initHighlightingOnLoad();
    </script>
</head>
<body>
<div id="container">
    <table cellspacing="0" cellpadding="0">
        <thead>
        <tr>
            <th class="docs">
                <h1><a href="../../../../../../index.html" title="Back to index">&larr;</a>&nbsp;&nbsp;$C.java</h1>
            </th>
            <th class="code"></th>
        </tr>
        </thead>
        <tbody>
        <tr id="section-0">
            <td class="docs">
                <div class="octowrap">
                    <a class="octothorpe" href="#section-0">#</a>
                </div>
            
            </td>
            <td class="code">
                <pre class="java"><code>package org.underscore.wrappers;

import org.underscore.functors.*;
import org.underscore.processor.IncludeInMain;

import java.util.*;</code></pre>
            </td>
        </tr>
        <tr id="section-1">
            <td class="docs">
                <div class="octowrap">
                    <a class="octothorpe" href="#section-1">#</a>
                </div>
            <p>User: alexogar
  Date: 2/24/13
  Time: 1:25 PM
 
</p>
            </td>
            <td class="code">
                <pre class="java"><code>public class $C&lt;T&gt; extends AbstractCollection&lt;T&gt;{

    private final Collection&lt;T&gt; internal;

    public $C() {
        this(new ArrayList&lt;&gt;());
    }

    public $C(T[] arr) {
        if (arr == null) {
            internal = new ArrayList&lt;&gt;();
            return;
        }
        internal = new ArrayList&lt;&gt;(Arrays.asList(arr));
    }

    public $C(Collection&lt;T&gt; it) {
        if (it == null) {
            internal = new ArrayList&lt;&gt;();
            return;
        }
        internal = it;
    }

    public $C&lt;T&gt; each(EachVisitor&lt;T&gt; visitor) {
        for (T e : internal) visitor.visit(e);
        return this;
    }

    public $C&lt;T&gt; each(EachNextVisitor&lt;T&gt; visitor) {
        int i = 0;
        for (T t : internal) {
            $O&lt;Boolean&gt; called = $O.$(false);
            visitor.visit(t,()-&gt;{called.set(true);});
            if (!called.get()){
                break;
            }
        }
        return this;
    }

    public $C&lt;T&gt; each(EachPairVisitor&lt;T, Integer&gt; visitor) {
        int i = 0;
        for (T t : internal) {
            visitor.visit(t, i);
            i++;
        }
        return this;
    }

    public &lt;E&gt; $C&lt;E&gt; map(TransformVisitor&lt;T,E&gt; visitor){
        List&lt;E&gt; list = new ArrayList&lt;&gt;();
        each((T f)-&gt;{list.add(visitor.visit(f));});
        return new $C&lt;&gt;(list);
    }

    public &lt;MEMO&gt; MEMO reduce(MEMO memo, ReducePairVisitor&lt;MEMO,T&gt; visitor){
        $O&lt;MEMO&gt; work = $O.$(memo);
        each((T t)-&gt;{
            work.set(visitor.visit(work.get(),t));
        });

        return work.get();
    }

    public T find(Matcher&lt;T&gt; matcher) {

        $O&lt;T&gt; result = new $O&lt;&gt;();

        each((T t,Next f)-&gt; {
            if (!matcher.match(t)) {
                f.call();
            } else {
                result.set(t);
            }
        });


        return result.get();
    }

    public $C&lt;T&gt; filter(Matcher&lt;T&gt; matcher) {

        $C&lt;T&gt; filtered = new $C&lt;&gt;();

        each((T t)-&gt;{
            if (matcher.match(t)){
                filtered.add(t);
            }
        });

        return filtered;
    }

    public $C&lt;T&gt; reject(Matcher&lt;T&gt; matcher) {
        return filter((T t)-&gt;!matcher.match(t));
    }

    public boolean every(Matcher&lt;T&gt; matcher) {
        return find((T t)-&gt;!matcher.match(t))==null;
    }

    public boolean some(Matcher&lt;T&gt; matcher) {
        return find(matcher)!=null;
    }

    public T[] array() {
        return (T[]) internal.toArray();
    }

    @IncludeInMain
    public static &lt;E&gt; $C&lt;E&gt; each(E[] it, EachVisitor&lt;E&gt; visitor) {
        return $(it).each(visitor);
    }

    @IncludeInMain
    public static &lt;E&gt; $C&lt;E&gt; $(Collection&lt;E&gt; it) {
        return new $C&lt;&gt;(it);
    }

    @IncludeInMain
    public static &lt;E&gt; $C&lt;E&gt; $(E[] it) {
        return new $C&lt;&gt;(it);
    }

    @IncludeInMain
    public static &lt;E&gt; $C&lt;E&gt; each(Collection&lt;E&gt; it, EachVisitor&lt;E&gt; visitor) {
        return $(it).each(visitor);
    }

    @IncludeInMain
    public static &lt;E&gt; $C&lt;E&gt; each(E[] it, EachPairVisitor&lt;E, Integer&gt; visitor) {
        return $(it).each(visitor);
    }

    @IncludeInMain
    public static &lt;E&gt; $C&lt;E&gt; each(Collection&lt;E&gt; it, EachPairVisitor&lt;E, Integer&gt; visitor) {
        return $(it).each(visitor);
    }

    @IncludeInMain
    public static &lt;F,T&gt; $C&lt;T&gt; map(Collection&lt;F&gt; it, TransformVisitor&lt;F,T&gt; visitor){
        return $(it).map(visitor);
    }

    @IncludeInMain
    public static &lt;F,T&gt; $C&lt;T&gt; map(F[] it, TransformVisitor&lt;F,T&gt; visitor) {
        return $(it).map(visitor);
    }

    @IncludeInMain
    public static &lt;K,MEMO&gt; MEMO reduce(K[] it, MEMO memo, ReducePairVisitor&lt;MEMO,K&gt; visitor) {
        return $(it).reduce(memo,visitor);
    }

    @Override
    public Iterator&lt;T&gt; iterator() {
        return internal.iterator();
    }

    @Override
    public boolean add(T t) {
        return internal.add(t);
    }

    @Override
    public int size() {
        return internal.size();
    }
}</code></pre>
            </td>
        </tr>
    </table>
</div>
</body>
</html>